/* -- DO NOT REMOVE --
 * jQuery MDTimePicker v1.0 plugin
 * 
 * Author: Dionlee Uy
 * Email: dionleeuy@gmail.com
 *
 * Date: Tuesday, August 28 2017
 *
 * @requires jQuery
 * -- DO NOT REMOVE -- */
if("undefined"==typeof jQuery)throw new Error("MDTimePicker: This plugin requires jQuery");+function(e){var t="mdtimepicker",i=120,n=90,s=360,r=30,a=6,o=[9,112,113,114,115,116,117,118,119,120,121,122,123],c=function(t,i){this.hour=t,this.minute=i,this.format=function(t,i){var n=this,s=(t.match(/h/g)||[]).length>1;return e.trim(t.replace(/(hh|h|mm|ss|tt|t)/g,function(e){switch(e.toLowerCase()){case"h":var t=n.getHour(!0);return i&&10>t?"0"+t:t;case"hh":return n.hour<10?"0"+n.hour:n.hour;case"mm":return n.minute<10?"0"+n.minute:n.minute;case"ss":return"00";case"t":return s?"":n.getT().toLowerCase();case"tt":return s?"":n.getT()}}))},this.setHour=function(e){this.hour=e},this.getHour=function(e){return e?[0,12].indexOf(this.hour)>=0?12:this.hour%12:this.hour},this.invert=function(){"AM"===this.getT()?this.setHour(this.getHour()+12):this.setHour(this.getHour()-12)},this.setMinutes=function(e){this.minute=e},this.getMinutes=function(){return this.minute},this.getT=function(){return this.hour<12?"AM":"PM"}},d=function(t,i){var n=this;this.visible=!1,this.activeView="hours",this.hTimeout=null,this.mTimeout=null,this.input=e(t),this.config=i,this.time=new c(0,0),this.selected=new c(0,0),this.timepicker={overlay:e('<div class="mdtimepicker hidden"></div>'),wrapper:e('<div class="mdtp__wrapper"></div>'),timeHolder:{wrapper:e('<section class="mdtp__time_holder"></section>'),hour:e('<span class="mdtp__time_h">12</span>'),dots:e('<span class="mdtp__timedots">:</span>'),minute:e('<span class="mdtp__time_m">00</span>'),am_pm:e('<span class="mdtp__ampm">AM</span>')},clockHolder:{wrapper:e('<section class="mdtp__clock_holder"></section>'),am:e('<span class="mdtp__am">AM</span>'),pm:e('<span class="mdtp__pm">PM</span>'),clock:{wrapper:e('<div class="mdtp__clock"></div>'),dot:e('<span class="mdtp__clock_dot"></span>'),hours:e('<div class="mdtp__hour_holder"></div>'),minutes:e('<div class="mdtp__minute_holder"></div>')},buttonsHolder:{wrapper:e('<div class="mdtp__buttons">'),btnClear:e('<span class="mdtp__button clear-btn">Clear</span>'),btnOk:e('<span class="mdtp__button ok">Ok</span>'),btnCancel:e('<span class="mdtp__button cancel">Cancel</span>')}}};var s=n.timepicker;if(n.setup(s).appendTo("body"),s.clockHolder.am.click(function(){"AM"!==n.selected.getT()&&n.setT("am")}),s.clockHolder.pm.click(function(){"PM"!==n.selected.getT()&&n.setT("pm")}),s.timeHolder.hour.click(function(){"hours"!==n.activeView&&n.switchView("hours")}),s.timeHolder.minute.click(function(){"minutes"!==n.activeView&&n.switchView("minutes")}),s.clockHolder.buttonsHolder.btnOk.click(function(){n.setValue(n.selected);var e=n.getFormattedTime();n.triggerChange({time:e.time,value:e.value}),n.hide()}),s.clockHolder.buttonsHolder.btnCancel.click(function(){n.hide()}),n.config.clearBtn&&s.clockHolder.buttonsHolder.btnClear.click(function(){n.input.val("").attr("data-time",null).attr("value",""),n.triggerChange({time:null,value:""}),n.hide()}),n.input.on("keydown",function(e){return 13===e.keyCode&&n.show(),!(o.indexOf(e.which)<0&&n.config.readOnly)}).on("click",function(){n.show()}).prop("readonly",n.config.readOnly),""!==n.input.val()){var r=n.parseTime(n.input.val(),n.config.format);n.setValue(r)}else{var r=n.getSystemTime();n.time=new c(r.hour,r.minute)}n.resetSelected(),n.switchView(n.activeView)};d.prototype={constructor:d,setup:function(t){if("undefined"==typeof t)throw new Error("Expecting a value.");var o=this,c=t.overlay,d=t.wrapper,u=t.timeHolder,l=t.clockHolder;u.wrapper.append(u.hour).append(u.dots).append(u.minute).append(u.am_pm).appendTo(d);for(var m=0;12>m;m++){var p=m+1,h=(i+m*r)%s,f=e('<div class="mdtp__digit rotate-'+h+'" data-hour="'+p+'"><span>'+p+"</span></div>");f.find("span").click(function(){var t=parseInt(e(this).parent().data("hour")),i=o.selected.getT(),n=(t+("PM"===i&&12>t||"AM"===i&&12===t?12:0))%24;o.setHour(n),o.switchView("minutes")}),l.clock.hours.append(f)}for(var m=0;60>m;m++){var v=10>m?"0"+m:m,h=(n+m*a)%s,g=e('<div class="mdtp__digit rotate-'+h+'" data-minute="'+m+'"></div>');m%5===0?g.addClass("marker").html("<span>"+v+"</span>"):g.html("<span></span>"),g.find("span").click(function(){o.setMinute(e(this).parent().data("minute"))}),l.clock.minutes.append(g)}return l.clock.wrapper.append(l.am).append(l.pm).append(l.clock.dot).append(l.clock.hours).append(l.clock.minutes).appendTo(l.wrapper),o.config.clearBtn&&l.buttonsHolder.wrapper.append(l.buttonsHolder.btnClear),l.buttonsHolder.wrapper.append(l.buttonsHolder.btnCancel).append(l.buttonsHolder.btnOk).appendTo(l.wrapper),l.wrapper.appendTo(d),d.attr("data-theme",o.config.theme||e.fn.mdtimepicker.defaults.theme),d.appendTo(c),c},setHour:function(t){if("undefined"==typeof t)throw new Error("Expecting a value.");var i=this;this.selected.setHour(t),this.timepicker.timeHolder.hour.text(this.selected.getHour(!0)),this.timepicker.clockHolder.clock.hours.children("div").each(function(t,n){var s=e(n),r=s.data("hour");s[r===i.selected.getHour(!0)?"addClass":"removeClass"]("active")})},setMinute:function(t){if("undefined"==typeof t)throw new Error("Expecting a value.");this.selected.setMinutes(t),this.timepicker.timeHolder.minute.text(10>t?"0"+t:t),this.timepicker.clockHolder.clock.minutes.children("div").each(function(i,n){var s=e(n),r=s.data("minute");s[r===t?"addClass":"removeClass"]("active")})},setT:function(e){if("undefined"==typeof e)throw new Error("Expecting a value.");this.selected.getT()!==e.toUpperCase()&&this.selected.invert();var t=this.selected.getT();this.timepicker.timeHolder.am_pm.text(t),this.timepicker.clockHolder.am["AM"===t?"addClass":"removeClass"]("active"),this.timepicker.clockHolder.pm["PM"===t?"addClass":"removeClass"]("active")},setValue:function(e){if("undefined"==typeof e)throw new Error("Expecting a value.");var t="string"==typeof e?this.parseTime(e,this.config.format):e;this.time=new c(t.hour,t.minute);var i=this.getFormattedTime();this.input.val(i.value).attr("data-time",i.time).attr("value",i.value)},resetSelected:function(){this.setHour(this.time.hour),this.setMinute(this.time.minute),this.setT(this.time.getT())},getFormattedTime:function(){var e=this.time.format(this.config.timeFormat,!1),t=this.time.format(this.config.format,this.config.hourPadding);return{time:e,value:t}},getSystemTime:function(){var e=new Date;return new c(e.getHours(),e.getMinutes())},parseTime:function(e,t){var i=this,n="undefined"==typeof t?i.config.format:t,s=(n.match(/h/g)||[]).length,r=s>1,a=((n.match(/m/g)||[]).length,(n.match(/t/g)||[]).length),o=e.length,d=n.indexOf("h"),u=n.lastIndexOf("h"),l="",m="",p="";if(i.config.hourPadding||r)l=e.substr(d,2);else{var h=n.substring(d-1,d),f=n.substring(u+1,u+2);l=u===n.length-1?e.substring(e.indexOf(h,d-1)+1,o):0===d?e.substring(0,e.indexOf(f,d)):e.substring(e.indexOf(h,d-1)+1,e.indexOf(f,d+1))}n=n.replace(/(hh|h)/g,l);var v=n.indexOf("m"),g=n.lastIndexOf("m"),k=n.indexOf("t"),w=n.substring(v-1,v);n.substring(g+1,g+2);m=g===n.length-1?e.substring(e.indexOf(w,v-1)+1,o):0===v?e.substring(0,2):e.substr(v,2),p=r?parseInt(l)>11?a>1?"PM":"pm":a>1?"AM":"am":e.substr(k,2);var H="pm"===p.toLowerCase(),C=new c(parseInt(l),parseInt(m));return(H&&parseInt(l)<12||!H&&12===parseInt(l))&&C.invert(),C},switchView:function(e){var t=this,i=this.timepicker,n=350;"hours"!==e&&"minutes"!==e||(t.activeView=e,i.timeHolder.hour["hours"===e?"addClass":"removeClass"]("active"),i.timeHolder.minute["hours"===e?"removeClass":"addClass"]("active"),i.clockHolder.clock.hours.addClass("animate"),"hours"===e&&i.clockHolder.clock.hours.removeClass("hidden"),clearTimeout(t.hTimeout),t.hTimeout=setTimeout(function(){"hours"!==e&&i.clockHolder.clock.hours.addClass("hidden"),i.clockHolder.clock.hours.removeClass("animate")},"hours"===e?20:n),i.clockHolder.clock.minutes.addClass("animate"),"minutes"===e&&i.clockHolder.clock.minutes.removeClass("hidden"),clearTimeout(t.mTimeout),t.mTimeout=setTimeout(function(){"minutes"!==e&&i.clockHolder.clock.minutes.addClass("hidden"),i.clockHolder.clock.minutes.removeClass("animate")},"minutes"===e?20:n))},show:function(){var t=this;if(""===t.input.val()){var i=t.getSystemTime();this.time=new c(i.hour,i.minute)}t.resetSelected(),e("body").attr("mdtimepicker-display","on"),t.timepicker.wrapper.addClass("animate"),t.timepicker.overlay.removeClass("hidden").addClass("animate"),setTimeout(function(){t.timepicker.overlay.removeClass("animate"),t.timepicker.wrapper.removeClass("animate"),t.visible=!0,t.input.blur()},10)},hide:function(){var t=this;t.timepicker.overlay.addClass("animate"),t.timepicker.wrapper.addClass("animate"),setTimeout(function(){t.switchView("hours"),t.timepicker.overlay.addClass("hidden").removeClass("animate"),t.timepicker.wrapper.removeClass("animate"),e("body").removeAttr("mdtimepicker-display"),t.visible=!1,t.input.focus()},300)},destroy:function(){var e=this;e.input.removeData(t).unbind("keydown").unbind("click").removeProp("readonly"),e.timepicker.overlay.remove()},triggerChange:function(t){this.input.trigger(e.Event("timechanged",t)).trigger("onchange").trigger("change")}},e.fn.mdtimepicker=function(i){return e(this).each(function(){var n=this,s=e(this),r=e(this).data(t);options=e.extend({},e.fn.mdtimepicker.defaults,s.data(),"object"==typeof i&&i),r||s.data(t,r=new d(n,options)),"string"==typeof i&&r[i](),e(document).on("keydown",function(e){27===e.keyCode&&r.visible&&r.hide()})})},e.fn.mdtimepicker.defaults={timeFormat:"hh:mm:ss.000",format:"h:mm tt",theme:"blue",readOnly:!0,hourPadding:!1,clearBtn:!1}}(jQuery);